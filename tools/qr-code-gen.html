<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Professional QR Code Generator</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{font-family:sans-serif;background:#f4f4f4;margin:0}
.tool-wrapper{max-width:520px;margin:60px auto;background:#fff;padding:32px;border-radius:14px;box-shadow:0 10px 30px rgba(0,0,0,.08);text-align:center}
h1{margin-bottom:10px}
.tool-desc{color:#666;font-size:15px;margin-bottom:24px}
input,select,button{width:100%;padding:12px;margin-bottom:16px;border-radius:8px;border:1px solid #ccc;font-size:14px}
button{background:#4f46e5;color:white;border:none;cursor:pointer}
button:hover{background:#4338ca}
#qrResult{margin-top:20px}
#qrResult canvas{max-width:100%;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.1)}
</style>
</head>
<body>

<main class="tool-wrapper">
<h1>QR Code Generator</h1>
<p class="tool-desc">Generate QR codes for text, website, email, WhatsApp, or location with optional logo.</p>

<select id="qrType">
  <option value="text">Text</option>
  <option value="url">Website URL</option>
  <option value="email">Email</option>
  <option value="whatsapp">WhatsApp</option>
  <option value="location">Location</option>
</select>

<input type="text" id="qrInput" placeholder="Enter text, URL, email, WhatsApp, or coordinates">
<input type="file" id="qrLogoInput" accept="image/*">
<button id="generateBtn">Generate QR Code</button>

<div id="qrResult"></div>
</main>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script>
document.getElementById("generateBtn").addEventListener("click", async () => {
  const type = document.getElementById("qrType").value;
  let value = document.getElementById("qrInput").value.trim();
  const qrLogoInput = document.getElementById("qrLogoInput");
  const qrResult = document.getElementById("qrResult");
  qrResult.innerHTML = "";

  if(!value){ alert("Enter a value"); return; }

  // Format value by type
  if(type==="email") value = `mailto:${value}`;
  if(type==="whatsapp") value = `https://wa.me/${value.replace(/\D/g,'')}`;
  if(type==="location") value = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(value)}`;

  // Step 1: Generate QR in a hidden div
  const tempDiv = document.createElement("div");
  qrResult.appendChild(tempDiv);
  const qr = new QRCode(tempDiv, {
    text: value,
    width: 300,
    height: 300,
    colorDark: "#000000",
    colorLight: "#ffffff",
    correctLevel: QRCode.CorrectLevel.H
  });

  // Wait for QR to render
  setTimeout(() => {
    const qrCanvas = tempDiv.querySelector("canvas");
    if(!qrCanvas) return;

    // If logo is selected
    if(qrLogoInput.files[0]){
      const reader = new FileReader();
      reader.onload = () => {
        const img = new Image();
        img.onload = () => {
          const ctx = qrCanvas.getContext("2d");
          const logoSize = qrCanvas.width * 0.2; // 20% size
          ctx.drawImage(img, (qrCanvas.width - logoSize)/2, (qrCanvas.height - logoSize)/2, logoSize, logoSize);
        };
        img.src = reader.result;
      };
      reader.readAsDataURL(qrLogoInput.files[0]);
    }

    qrResult.appendChild(qrCanvas);
    tempDiv.remove(); // remove hidden div
  }, 150);
});
</script>

</body>
</html>
